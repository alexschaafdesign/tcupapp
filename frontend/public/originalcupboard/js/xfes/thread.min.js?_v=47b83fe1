window.XFES=window.XFES||{};
((c,d)=>{XFES.SuggestedThreads=XF.Element.newHandler({options:{searchUrl:null,searchContainer:"< form | .js-suggestedThreadContainer",searchDisabler:".js-suggestedThreadDisable",delay:500,onBlur:!0},enabled:!0,searchContainer:null,searchedTitle:"",timeout:null,init(){if(this.options.searchUrl){var a=XF.findRelativeIf(this.options.searchContainer,this.target);if(a){this.searchContainer=a;XF.onDelegated(this.searchContainer,"click",this.options.searchDisabler,this.disable.bind(this));XF.on(this.target,
"keydown",this.keydown.bind(this));if(this.options.delay)XF.on(this.target,"input",this.debounceSearch.bind(this));if(this.options.onBlur)XF.on(this.target,"blur",this.performSearch.bind(this));if(a=this.target.closest("form"))XF.on(a,"reset",this.hideSearchContainer.bind(this))}else console.error("No search container was found: %o",this.target)}else console.error("No search URL was provided: %o",this.target)},enable(){this.enabled=!0},disable(){this.enabled=!1;this.hideSearchContainer()},keydown(a){"Escape"===
a.key&&this.enabled&&(this.disable(),a.preventDefault(),a.stopPropagation())},debounceSearch(){this.timeout&&clearTimeout(this.timeout);this.timeout=setTimeout(this.performSearch.bind(this),this.options.delay)},performSearch(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null);if(this.enabled){var a=this.getInputTitle();a!==this.searchedTitle&&(this.searchedTitle=a,""===a?this.hideSearchContainer():XF.ajax("POST",this.options.searchUrl,{title:a},this.handleResponse.bind(this),{skipDefault:!0}))}},
handleResponse(a){a.errors||a.exception?this.hideSearchContainer():a.title===this.getInputTitle()&&(0===a.resultCount?this.hideSearchContainer():XF.setupHtmlInsert(a.html,b=>{this.showSearchContainer(b)}))},getInputTitle(){return this.target.value.trim()},showSearchContainer(a){this.searchContainer.innerHTML="";this.searchContainer.append(a);"none"===this.searchContainer.style.display&&XF.Animate.fadeDown(this.searchContainer,{speed:XF.config.speed.fast})},hideSearchContainer(){XF.Animate.fadeUp(this.searchContainer,
{speed:XF.config.speed.fast,complete:()=>{this.searchContainer.replaceChildren()}})}});XF.Element.register("suggested-threads","XFES.SuggestedThreads")})(window,document);
